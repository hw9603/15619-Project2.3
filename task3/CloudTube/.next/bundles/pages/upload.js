module.exports=__NEXT_REGISTER_PAGE("/upload",function(){var e=webpackJsonp([2],{213:function(e,t,r){e.exports=r(214)},214:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(32);var o=g(n);var i=r(4);var s=g(i);var a=r(5);var u=g(a);var l=r(6);var p=g(l);var c=r(7);var f=g(c);var h=r(0);var d=g(h);function g(e){return e&&e.__esModule?e:{default:e}}var v=function e(){return d.default.createElement("span",null)};var y=function(e){(0,f.default)(t,e);function t(){var e;(0,s.default)(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,p.default)(this,(e=(0,o.default)(t)).call.apply(e,[this].concat(n)));a.state={canRender:false};return a}(0,u.default)(t,[{key:"componentDidMount",value:function e(){this.setState({canRender:true})}},{key:"render",value:function e(){var t=this.props;var r=t.children;var n=t.onSSR;var o=void 0===n?d.default.createElement(v,null):n;var i=this.state.canRender;return i?r:o}}]);return t}(d.default.Component);t.default=y},610:function(e,t,r){e.exports=r(611)},611:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(27);var o=r.n(n);var i=r(0);var s=r.n(i);var a=r(213);var u=r.n(a);var l=r(77);var p=r(612);var c=r.n(p);var f=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){g(t,e);function t(e){h(this,t);var r=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={complete:false,progress:0,started:false,error:false};return r}f(t,[{key:"onUploadFinish",value:function e(t){console.log("Upload Complete: ",t);this.setState({complete:true})}},{key:"onUploadProgress",value:function e(t){t%10===0&&console.log("Upload Progress: ",t,"%");this.setState({progress:t})}},{key:"onUploadStart",value:function e(t,r){console.log("Start Upload: ",t);this.setState({started:true,progress:0,complete:false,fileName:t.name});r(t)}},{key:"onUploadError",value:function e(t){console.error(t);this.setState({error:true})}},{key:"render",value:function e(){return s.a.createElement("div",{className:"upload-container"},s.a.createElement(l["b"],{centered:true},s.a.createElement(l["b"].Column,{width:14},s.a.createElement(l["b"],{stackable:true,className:"upload-status"},s.a.createElement(l["b"].Column,{width:4},s.a.createElement(u.a,null,s.a.createElement(c.a,{id:"file",className:"file-input",signingUrl:"/s3/sign",signingUrlMethod:"GET",s3path:"",preprocess:this.onUploadStart.bind(this),onProgress:this.onUploadProgress.bind(this),onError:this.onUploadError.bind(this),onFinish:this.onUploadFinish.bind(this),uploadRequestHeaders:{"x-amz-acl":"public-read"},contentDisposition:"auto",scrubFilename:function e(t){return t.replace(/[^\w\d-.]+/gi,"_")},autoUpload:true}),s.a.createElement("label",{for:"file",className:"clickable upload-btn"},"Choose Video ",s.a.createElement(l["c"],{name:"cloud upload"})))),s.a.createElement(l["b"].Column,{width:12},!!this.state.started&&s.a.createElement(l["f"],{size:"big",percent:this.state.progress,color:this.state.complete?"olive":"red",inverted:true,progress:true},this.state.fileName+" - ",this.state.error?"Error, please refresh and try again":this.state.complete?"Upload Complete":"Uploading Video..."))))))}}]);return t}(s.a.Component);var y=v;var m=r(131);var E=r(132);var b=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();function U(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var s=t[o](i);var a=s.value}catch(e){r(e);return}if(!s.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function P(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var D=function(e){P(t,e);function t(){_(this,t);return N(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}b(t,[{key:"render",value:function e(){return s.a.createElement(m["a"],null,s.a.createElement(y,this.props))}}],[{key:"getInitialProps",value:function(){var e=U(o.a.mark(function e(t){var r=t.query;return o.a.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",{});case 1:case"end":return t.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]);return t}(s.a.Component);var R=t["default"]=Object(E["a"])(D)},612:function(e,t,r){e.exports=r(613)},613:function(e,t,r){"use strict";var n=r(0),o=r(95),i=r(33),s=r(614),a=r(616),u=r(617);var l=s({propTypes:{signingUrl:i.string,getSignedUrl:i.func,preprocess:i.func,onProgress:i.func,onFinish:i.func,onError:i.func,signingUrlMethod:i.string,signingUrlHeaders:i.oneOfType([i.object,i.func]),signingUrlQueryParams:i.oneOfType([i.object,i.func]),signingUrlWithCredentials:i.bool,uploadRequestHeaders:i.object,contentDisposition:i.string,server:i.string,scrubFilename:i.func,s3path:i.string,inputRef:i.func,autoUpload:i.bool},getDefaultProps:function(){return{preprocess:function(e,t){console.log("Pre-process: "+e.name);t(e)},onProgress:function(e,t){console.log("Upload progress: "+e+"% "+t)},onFinish:function(e){console.log("Upload finished: "+e.publicUrl)},onError:function(e){console.log("Upload error: "+e)},server:"",signingUrlMethod:"GET",scrubFilename:function(e){return e.replace(/[^\w\d_\-\.]+/gi,"")},s3path:"",autoUpload:true}},uploadFile:function(){this.myUploader=new a({fileElement:o.findDOMNode(this),signingUrl:this.props.signingUrl,getSignedUrl:this.props.getSignedUrl,preprocess:this.props.preprocess,onProgress:this.props.onProgress,onFinishS3Put:this.props.onFinish,onError:this.props.onError,signingUrlMethod:this.props.signingUrlMethod,signingUrlHeaders:this.props.signingUrlHeaders,signingUrlQueryParams:this.props.signingUrlQueryParams,signingUrlWithCredentials:this.props.signingUrlWithCredentials,uploadRequestHeaders:this.props.uploadRequestHeaders,contentDisposition:this.props.contentDisposition,server:this.props.server,scrubFilename:this.props.scrubFilename,s3path:this.props.s3path})},abort:function(){this.myUploader&&this.myUploader.abortUpload()},clear:function(){p(o.findDOMNode(this))},render:function(){return n.createElement("input",this.getInputProps())},getInputProps:function(){var e={type:"file",ref:this.props.inputRef};this.props.autoUpload&&(e.onChange=this.uploadFile);var t=u({},this.props,e);var r={};var n=Object.keys(l.propTypes);for(var o in t)t.hasOwnProperty(o)&&-1===n.indexOf(o)&&(r[o]=t[o]);return r}});function p(e){if(e.value){try{e.value=""}catch(e){}if(e.value){var t=document.createElement("form"),r=e.parentNode,n=e.nextSibling;t.appendChild(e);t.reset();r.insertBefore(e,n)}}}e.exports=l},614:function(e,t,r){"use strict";var n=r(0);var o=r(615);if("undefined"===typeof n)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var i=(new n.Component).updater;e.exports=o(n.Component,n.isValidElement,i)},615:function(e,t,r){"use strict";var n=r(73);var o=r(148);var i=r(156);var s;false;var a="mixins";function u(e){return e}var l;false;l={};function p(e,t,r){var s=[];var l={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"};var p={getDerivedStateFromProps:"DEFINE_MANY_MERGED"};var c={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var r=0;r<t.length;r++)d(e,t[r])},childContextTypes:function(e,t){false;e.childContextTypes=n({},e.childContextTypes,t)},contextTypes:function(e,t){false;e.contextTypes=n({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=y(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){false;e.propTypes=n({},e.propTypes,t)},statics:function(e,t){g(e,t)},autobind:function(){}};function f(e,t,r){for(var n in t)t.hasOwnProperty(n)&&false}function h(e,t){var r=l.hasOwnProperty(t)?l[t]:null;N.hasOwnProperty(t)&&i("OVERRIDE_BASE"===r,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t);e&&i("DEFINE_MANY"===r||"DEFINE_MANY_MERGED"===r,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function d(e,r){if(!r){var n;var o;false;return}i("function"!==typeof r,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object.");i(!t(r),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var s=e.prototype;var u=s.__reactAutoBindPairs;r.hasOwnProperty(a)&&c.mixins(e,r.mixins);for(var p in r){if(!r.hasOwnProperty(p))continue;if(p===a)continue;var f=r[p];var d=s.hasOwnProperty(p);h(d,p);if(c.hasOwnProperty(p))c[p](e,f);else{var g=l.hasOwnProperty(p);var v="function"===typeof f;var E=v&&!g&&!d&&false!==r.autobind;if(E){u.push(p,f);s[p]=f}else if(d){var b=l[p];i(g&&("DEFINE_MANY_MERGED"===b||"DEFINE_MANY"===b),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",b,p);"DEFINE_MANY_MERGED"===b?s[p]=y(s[p],f):"DEFINE_MANY"===b&&(s[p]=m(s[p],f))}else{s[p]=f;false}}}}function g(e,t){if(!t)return;for(var r in t){var n=t[r];if(!t.hasOwnProperty(r))continue;var o=r in c;i(!o,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',r);var s=r in e;if(s){var a=p.hasOwnProperty(r)?p[r]:null;i("DEFINE_MANY_MERGED"===a,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",r);e[r]=y(e[r],n);return}e[r]=n}}function v(e,t){i(e&&t&&"object"===typeof e&&"object"===typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var r in t)if(t.hasOwnProperty(r)){i(void 0===e[r],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",r);e[r]=t[r]}return e}function y(e,t){return function r(){var n=e.apply(this,arguments);var o=t.apply(this,arguments);if(null==n)return o;if(null==o)return n;var i={};v(i,n);v(i,o);return i}}function m(e,t){return function r(){e.apply(this,arguments);t.apply(this,arguments)}}function E(e,t){var r=t.bind(e);var n;var o;false;return r}function b(e){var t=e.__reactAutoBindPairs;for(var r=0;r<t.length;r+=2){var n=t[r];var o=t[r+1];e[n]=E(e,o)}}var U={componentDidMount:function(){this.__isMounted=true}};var _={componentWillUnmount:function(){this.__isMounted=false}};var N={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){false;return!!this.__isMounted}};var P=function(){};n(P.prototype,e.prototype,N);function D(e){var t=u(function(e,n,s){false;this.__reactAutoBindPairs.length&&b(this);this.props=e;this.context=n;this.refs=o;this.updater=s||r;this.state=null;var a=this.getInitialState?this.getInitialState():null;false;i("object"===typeof a&&!Array.isArray(a),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent");this.state=a});t.prototype=new P;t.prototype.constructor=t;t.prototype.__reactAutoBindPairs=[];s.forEach(d.bind(null,t));d(t,U);d(t,e);d(t,_);t.getDefaultProps&&(t.defaultProps=t.getDefaultProps());false;i(t.prototype.render,"createClass(...): Class specification must implement a `render` method.");false;for(var n in l)t.prototype[n]||(t.prototype[n]=null);return t}return D}e.exports=p},616:function(e,t){r.prototype.server="";r.prototype.signingUrl="/sign-s3";r.prototype.signingUrlMethod="GET";r.prototype.signingUrlSuccessResponses=[200,201];r.prototype.fileElement=null;r.prototype.files=null;r.prototype.onFinishS3Put=function(e,t){return console.log("base.onFinishS3Put()",e.publicUrl)};r.prototype.preprocess=function(e,t){console.log("base.preprocess()",e);return t(e)};r.prototype.onProgress=function(e,t,r){return console.log("base.onProgress()",e,t)};r.prototype.onError=function(e,t){return console.log("base.onError()",e)};r.prototype.scrubFilename=function(e){return e.replace(/[^\w\d_\-\.]+/gi,"")};function r(e){null==e&&(e={});for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);var r=this.fileElement?this.fileElement.files:this.files||[];this.handleFileSelect(r)}r.prototype.handleFileSelect=function(e){var t=[];for(var r=0;r<e.length;r++){var n=e[r];this.preprocess(n,function(e){this.onProgress(0,"Waiting",e);t.push(this.uploadFile(e));return t}.bind(this))}};r.prototype.createCORSRequest=function(e,t,r){var r=r||{};var n=new XMLHttpRequest;if(null!=n.withCredentials){n.open(e,t,true);null!=r.withCredentials&&(n.withCredentials=r.withCredentials)}else if("undefined"!==typeof XDomainRequest){n=new XDomainRequest;n.open(e,t)}else n=null;return n};r.prototype.executeOnSignedUrl=function(e,t){var r=this.scrubFilename(e.name);var n="?objectName="+r+"&contentType="+encodeURIComponent(e.type);this.s3path&&(n+="&path="+encodeURIComponent(this.s3path));if(this.signingUrlQueryParams){var o="function"===typeof this.signingUrlQueryParams?this.signingUrlQueryParams():this.signingUrlQueryParams;Object.keys(o).forEach(function(e){var t=o[e];n+="&"+e+"="+t})}var i=this.createCORSRequest(this.signingUrlMethod,this.server+this.signingUrl+n,{withCredentials:this.signingUrlWithCredentials});if(this.signingUrlHeaders){var s="function"===typeof this.signingUrlHeaders?this.signingUrlHeaders():this.signingUrlHeaders;Object.keys(s).forEach(function(e){var t=s[e];i.setRequestHeader(e,t)})}i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined");i.onreadystatechange=function(){if(4===i.readyState&&this.signingUrlSuccessResponses.indexOf(i.status)>=0){var r;try{r=JSON.parse(i.responseText)}catch(t){this.onError("Invalid response from server",e);return false}return t(r)}if(4===i.readyState&&this.signingUrlSuccessResponses.indexOf(i.status)<0)return this.onError("Could not contact request signing server. Status = "+i.status,e)}.bind(this);return i.send()};r.prototype.uploadToS3=function(e,t){var r=this.createCORSRequest("PUT",t.signedUrl);if(r){r.onload=function(){if(200===r.status){this.onProgress(100,"Upload completed",e);return this.onFinishS3Put(t,e)}return this.onError("Upload error: "+r.status,e)}.bind(this);r.onerror=function(){return this.onError("XHR error",e)}.bind(this);r.upload.onprogress=function(t){var r;if(t.lengthComputable){r=Math.round(t.loaded/t.total*100);return this.onProgress(r,100===r?"Finalizing":"Uploading",e)}}.bind(this)}else this.onError("CORS not supported",e);r.setRequestHeader("Content-Type",e.type);if(this.contentDisposition){var n=this.contentDisposition;"auto"===n&&(n="image/"===e.type.substr(0,6)?"inline":"attachment");var o=this.scrubFilename(e.name);r.setRequestHeader("Content-Disposition",n+'; filename="'+o+'"')}if(t.headers){var i=t.headers;Object.keys(i).forEach(function(e){var t=i[e];r.setRequestHeader(e,t)})}if(this.uploadRequestHeaders){var s=this.uploadRequestHeaders;Object.keys(s).forEach(function(e){var t=s[e];r.setRequestHeader(e,t)})}else r.setRequestHeader("x-amz-acl","public-read");this.httprequest=r;return r.send(e)};r.prototype.uploadFile=function(e){var t=this.uploadToS3.bind(this,e);if(this.getSignedUrl)return this.getSignedUrl(e,t);return this.executeOnSignedUrl(e,t)};r.prototype.abortUpload=function(){this.httprequest&&this.httprequest.abort()};e.exports=r},617:function(e,t,r){"use strict";function n(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=Object.assign||function(e,t){var r;var o;var i=n(e);for(var s=1;s<arguments.length;s++){r=arguments[s];o=Object.keys(Object(r));for(var a=0;a<o.length;a++)i[o[a]]=r[o[a]]}return i}}},[610]);return{page:e.default}});